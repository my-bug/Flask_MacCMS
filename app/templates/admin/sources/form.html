{% extends "admin/base.html" %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">{{ '编辑采集源' if source else '添加采集源' }}</h2>
        <a href="{{ url_for('admin.sources_list') }}" class="btn btn-flat">返回列表</a>
    </div>
    
    <div class="card-body">
        <form method="POST" class="form">
            <div class="form-group">
                <label for="name" class="form-label">采集源名称 *</label>
                <input type="text" 
                       class="form-control" 
                       id="name" 
                       name="name" 
                       value="{{ source.name if source else '' }}" 
                       required 
                       placeholder="例如: 奥斯影视">
            </div>
            
            <div class="form-group">
                <label for="url" class="form-label">MacCMS10规范API地址 *</label>
                <input type="url" 
                       class="form-control" 
                       id="url" 
                       name="url" 
                       value="{{ source.url if source else '' }}" 
                       required 
                       placeholder="例如: https://aosikazy.com/api.php/provide/vod/">
                <small class="text-muted">必须是MacCMS10标准接口,系统会自动拼接参数(ac、at、t等)</small>
            </div>
            
            <div class="form-group">
                <label for="api_type" class="form-label">API类型</label>
                <select class="form-control" id="api_type" name="api_type">
                    <option value="json" {% if not source or source.api_type == 'json' %}selected{% endif %}>JSON</option>
                    <option value="xml" {% if source and source.api_type == 'xml' %}selected{% endif %}>XML</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="sort_order" class="form-label">排序</label>
                <input type="number" 
                       class="form-control" 
                       id="sort_order" 
                       name="sort_order" 
                       value="{{ source.sort_order if source else 0 }}" 
                       min="0"
                       placeholder="数字越小越靠前">
            </div>
            
            <div class="form-group">
                <div class="form-check">
                    <input type="checkbox" 
                           class="form-check-input" 
                           id="is_active" 
                           name="is_active" 
                           {% if not source or source.is_active %}checked{% endif %}>
                    <label class="form-check-label" for="is_active">启用此采集源</label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="note" class="form-label">备注说明</label>
                <textarea class="form-control" 
                          id="note" 
                          name="note" 
                          rows="3" 
                          placeholder="可以输入一些说明信息">{{ source.note if source else '' }}</textarea>
            </div>
            
            <div class="form-group form-group-mt">
                <button type="submit" class="btn btn-primary btn-lg">
                    {{ '保存修改' if source else '添加' }}
                </button>
                <a href="{{ url_for('admin.sources_list') }}" class="btn btn-flat btn-lg">取消</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
